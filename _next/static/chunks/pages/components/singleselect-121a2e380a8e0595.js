(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1715],{52278:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/components/singleselect",function(){return n(56707)}])},56707:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return ne}});var l=n(85893),i=n(9008),o=n.n(i),a=n(37039),r=n(97812),s=n(11533),u=n(98656),c=n(69832),d=n(67434),p=n(60257),m=n(675),f=n(62991),I=n(98607),h=n(78502),v=n(26274),g=n(41518),x=n(67294),b=n(32125),_=n(94184),w=n.n(_),T=n(27143),y=n(48180),S=n(35243),j=n(10076),R=n(3819),Z=n(72465),k=n(54290),C=n(44934),P=n(54279),O=n(29853),q=n(4606),A=n(66646),E=n(73429),B=n(2763),D=n(39870),N=["id","className","theme","labelText","optionalText","hintText","onItemSelectionChange","visualPlaceholder","noItemsText","defaultSelectedItem","onChange","onBlur","debounce","status","statusText","selectedItem","clearButtonLabel","ariaOptionsAvailableText","ariaOptionsAvailableTextFunction","onItemSelect","disabled","allowItemAddition","itemAdditionHelpText","tooltipComponent","items","forwardedRef"],L=["id"];function V(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,l)}return n}function F(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?V(Object(n),!0).forEach((function(t){(0,g.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function M(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,l=(0,v.Z)(e);if(t){var i=(0,v.Z)(this).constructor;n=Reflect.construct(l,arguments,i)}else n=l.apply(this,arguments);return(0,h.Z)(this,n)}}var K="fi-single-select",X={valueSelected:"".concat(K,"--value-selected"),clearButtonWrapper:"".concat(K,"_clear-button_wrapper"),open:"".concat(K,"--open"),error:"".concat(K,"--error"),queryHighlight:"".concat(K,"-item--query_highlight")},z=function(e){(0,I.Z)(n,e);var t=M(n);function n(e){var l,i,o;return(0,p.Z)(this,n),o=t.call(this,e),(0,g.Z)((0,f.Z)(o),"popoverListRef",void 0),(0,g.Z)((0,f.Z)(o),"filterInputRef",void 0),(0,g.Z)((0,f.Z)(o),"toggleButtonRef",void 0),(0,g.Z)((0,f.Z)(o),"clearButtonRef",void 0),(0,g.Z)((0,f.Z)(o),"preventShowPopoverOnInputFocus",!1),(0,g.Z)((0,f.Z)(o),"state",{filterInputValue:null!==(l=o.props.selectedItem)&&void 0!==l&&l.labelText?o.props.selectedItem.labelText:(null===(i=o.props.defaultSelectedItem)||void 0===i?void 0:i.labelText)||"",filteredItems:o.props.items,filterMode:!1,showPopover:!1,focusedDescendantId:null,selectedItem:o.props.selectedItem?o.props.selectedItem:o.props.defaultSelectedItem||null,initialItems:o.props.items,computedItems:o.props.items}),(0,g.Z)((0,f.Z)(o),"filter",(function(e,t){return e.labelText.toLowerCase().includes(t.toLowerCase())})),(0,g.Z)((0,f.Z)(o),"handleBlur",(function(){o.props.onBlur&&o.props.onBlur();var e=(0,y.r3)(o.popoverListRef);e&&requestAnimationFrame((function(){var t,n,l=null===(t=o.popoverListRef.current)||void 0===t?void 0:t.contains(e.activeElement),i=null===(n=o.toggleButtonRef.current)||void 0===n?void 0:n.contains(e.activeElement),a=e.activeElement===o.filterInputRef.current,r=l||a||i;r||o.setState((function(e){var t;return{filterInputValue:(null===(t=e.selectedItem)||void 0===t?void 0:t.labelText)||"",filterMode:!1,showPopover:r,focusedDescendantId:null}}))}))})),(0,g.Z)((0,f.Z)(o),"handleOnChange",(function(e){o.setState((function(t){var n;return{filterInputValue:t.filterMode||!t.selectedItem?e:e.replace(new RegExp("^".concat((0,y.fA)((null===(n=t.selectedItem)||void 0===n?void 0:n.labelText)||""))),""),showPopover:!0,filterMode:!0}}))})),(0,g.Z)((0,f.Z)(o),"focusToInputAndSelectText",(function(){o.filterInputRef&&o.filterInputRef.current&&(o.filterInputRef.current.focus(),setTimeout((function(){var e;return null===(e=o.filterInputRef.current)||void 0===e?void 0:e.select()}),100))})),(0,g.Z)((0,f.Z)(o),"focusToInputAndCloseMenu",(function(){o.focusToInputAndSelectText(),o.setState({showPopover:!1,filterMode:!1,focusedDescendantId:null})})),(0,g.Z)((0,f.Z)(o),"handleItemSelection",(function(e){if(null===e||!e.disabled){var t=o.props,n=t.onItemSelect,l=t.onItemSelectionChange;if(t.selectedItem)o.setState((function(e){var t;return{filterInputValue:(null===(t=e.selectedItem)||void 0===t?void 0:t.labelText)||""}}));else{var i=[];if(null!==e)o.props.items.some((function(t){return t.uniqueItemId===e.uniqueItemId}))||i.push(e);o.setState({selectedItem:e||null,filterInputValue:(null===e||void 0===e?void 0:e.labelText)||"",focusedDescendantId:null,computedItems:o.props.items.concat(i)})}n&&n((null===e||void 0===e?void 0:e.uniqueItemId)||null),l&&l(e),o.focusToInputAndCloseMenu()}})),(0,g.Z)((0,f.Z)(o),"handleKeyDown",(function(e){var t=o.state,n=t.filteredItems,l=t.focusedDescendantId,i=t.filterMode,a=t.filterInputValue,r=i?n:o.state.computedItems,s=l?r.findIndex((function(e){return e.uniqueItemId===l})):null;switch(e.key){case"ArrowDown":o.state.showPopover||o.setState({showPopover:!0});var u=!o.props.allowItemAddition||s!==r.length-1&&0!==r.length||""===a||o.inputValueInItems()?r[null!==s?(s+1)%r.length:0]:{uniqueItemId:a.toLowerCase(),labelText:a};u&&o.setState({focusedDescendantId:u.uniqueItemId});break;case"ArrowUp":o.state.showPopover||o.setState({showPopover:!0});var c=!o.props.allowItemAddition||null!==s&&0!==s||""===a||o.inputValueInItems()?r[null!==s&&-1!==s?(s-1+r.length)%r.length:r.length-1]:{uniqueItemId:a.toLowerCase(),labelText:a};c&&o.setState({focusedDescendantId:c.uniqueItemId});break;case"Enter":if(e.preventDefault(),l){var d=r.find((function(e){return e.uniqueItemId===l}));if(d)o.handleItemSelection(d);else{var p={uniqueItemId:a.toLowerCase(),labelText:a};o.handleItemSelection(p)}}break;case"Escape":o.state.showPopover&&e.stopPropagation(),o.state.selectedItem||o.setState({filterInputValue:""}),o.focusToInputAndCloseMenu()}})),(0,g.Z)((0,f.Z)(o),"inputValueInItems",(function(){return!!o.state.computedItems.find((function(e){return e.uniqueItemId===o.state.filterInputValue.toLowerCase()||e.labelText.toLowerCase()===o.state.filterInputValue.toLowerCase()}))})),o.popoverListRef=x.createRef(),o.props.forwardedRef?o.filterInputRef=o.props.forwardedRef:o.filterInputRef=x.createRef(),o.toggleButtonRef=x.createRef(),o.clearButtonRef=x.createRef(),o}return(0,m.Z)(n,[{key:"componentDidUpdate",value:function(e){JSON.stringify(this.props.items)!==JSON.stringify(e.items)&&this.setState({computedItems:this.props.items})}},{key:"isOutsideClick",value:function(e){return!!this.toggleButtonRef&&this.toggleButtonRef.current.contains(e.target)}},{key:"render",value:function(){var e,t=this,n=this.state,l=n.filteredItems,i=n.filterMode,o=n.showPopover,a=n.focusedDescendantId,r=n.filterInputValue,s=n.selectedItem,u=n.computedItems,c=this.props,p=c.id,m=c.className;c.theme;var f=c.labelText,I=c.optionalText,h=c.hintText;c.onItemSelectionChange;var v=c.visualPlaceholder,b=c.noItemsText;c.defaultSelectedItem;var _=c.onChange;c.onBlur;var y=c.debounce,S=c.status,Z=c.statusText;c.selectedItem;var B=c.clearButtonLabel,L=c.ariaOptionsAvailableText,V=c.ariaOptionsAvailableTextFunction;c.onItemSelect;var M=c.disabled,z=c.allowItemAddition,H=c.itemAdditionHelpText,W=c.tooltipComponent;c.items,c.forwardedRef;var J=(0,d.Z)(c,N),Q=a?"".concat(p,"-").concat(a):"",U="".concat(p,"-popover"),G=i?l:u;return x.createElement(T.hh,F(F({},J),{},{className:w()(K,m,(e={},(0,g.Z)(e,X.valueSelected,!!s),(0,g.Z)(e,X.open,o),(0,g.Z)(e,X.error,"error"===S),e))}),x.createElement(j.K,{waitFor:y},(function(e){return x.createElement(k.H,{inputElementContainerProps:{role:"combobox","aria-haspopup":"listbox","aria-owns":U,"aria-expanded":o},"aria-activedescendant":Q,id:p,"aria-controls":U,labelText:f,optionalText:I,hintText:h,items:u,onFilter:function(e){t.state.filterMode&&t.setState((function(t){var n=t.focusedDescendantId;return e.some((function(e){return e.uniqueItemId===n}))||(n=null),{filteredItems:e,focusedDescendantId:n}}))},filterFunc:t.filter,forwardedRef:t.filterInputRef,onFocus:function(){t.preventShowPopoverOnInputFocus||t.setState({showPopover:!0}),t.preventShowPopoverOnInputFocus=!1},onClick:function(){t.focusToInputAndSelectText(),t.setState({showPopover:!0})},onKeyDown:t.handleKeyDown,onBlur:t.handleBlur,value:r,onChange:function(n){_&&e(_,n),t.handleOnChange(n)},visualPlaceholder:s?"":v,status:S,statusText:Z,disabled:M,tooltipComponent:W},!!s&&x.createElement(T.hh,{className:X.clearButtonWrapper},x.createElement(P.k,{forwardedRef:t.clearButtonRef,onClick:function(){return t.handleItemSelection(null)},onBlur:t.handleBlur,label:B,disabled:M})),x.createElement(E.e,{open:o,ref:t.toggleButtonRef,onClick:function(e){e.preventDefault(),t.setState((function(e){return{showPopover:!e.showPopover}})),t.preventShowPopoverOnInputFocus=!0,t.focusToInputAndSelectText()},"aria-hidden":!0,tabIndex:-1,disabled:M}))})),o&&x.createElement(R.J,{sourceRef:this.filterInputRef,matchWidth:!0,onKeyDown:this.handleKeyDown,onClickOutside:function(e){t.isOutsideClick(e)||t.setState({showPopover:!1})}},x.createElement(O.A,{id:U,ref:this.popoverListRef,focusedDescendantId:Q},x.createElement(T.hh,null,G.length>0&&G.map((function(e){var n,l=e.uniqueItemId===a;return x.createElement(q.Q,{hasKeyboardFocus:l,key:"".concat(e.uniqueItemId,"_").concat(e.uniqueItemId===(null===s||void 0===s?void 0:s.uniqueItemId)),id:"".concat(p,"-").concat(e.uniqueItemId),checked:e.uniqueItemId===(null===s||void 0===s?void 0:s.uniqueItemId),disabled:e.disabled,onClick:function(){t.handleItemSelection(e)},hightlightQuery:i?null===(n=t.filterInputRef.current)||void 0===n?void 0:n.value:""},e.labelText)})),0===G.length&&!z&&x.createElement(A.q,null,b),""!==r&&!this.inputValueInItems()&&z&&x.createElement(D.p,{hintText:H,hasKeyboardFocus:r===a,id:"".concat(p,"-").concat(r.toLowerCase()),onClick:function(){var e={labelText:r,uniqueItemId:r.toLowerCase()};t.handleItemSelection(e)}},r)))),this.state.filterMode&&x.createElement(C.T,{"aria-live":"polite","aria-atomic":"true"},V?V(G.length):"".concat(G.length," ").concat(L)))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n,l=e.items,i=e.selectedItem,o="selectedItem"in e&&(null===i||void 0===i?void 0:i.uniqueItemId)!==(null===(n=t.selectedItem)||void 0===n?void 0:n.uniqueItemId);return o||l!==t.initialItems?{selectedItem:"selectedItem"in e?i:t.selectedItem,filteredItems:l,filterInputValue:o?(null===i||void 0===i?void 0:i.labelText)||"":t.filterInputValue,filterMode:t.filterMode,initialItems:l}:null}}]),n}(x.Component),H=(0,b.ZP)(z).withConfig({componentId:"sc-t1n3a2-0"})(["",""],(function(e){return function(e){return(0,b.iv)([""," width:290px;&.fi-single-select{& .fi-filter-input_input{padding-right:36px;}&--value-selected{& .fi-filter-input_input{padding-right:73px;}}}&.fi-single-select--open{& .fi-filter-input_input{border-bottom:0;border-bottom-left-radius:0;border-bottom-right-radius:0;}}"],(0,B.LZ)(e)("bodyText"))}(e.theme)}));function W(e,t){var n=e.id,l=(0,d.Z)(e,L);return x.createElement(Z.cY,null,(function(e){var i=e.suomifiTheme;return x.createElement(S.z,{id:n},(function(e){return x.createElement(H,F({theme:i,id:e,forwardedRef:t},l))}))}))}var J=(0,x.forwardRef)(W);J.displayName="SingleSelect";var Q=n(1292),U=n(4115),G=n(32594),Y=n(14910),$=n(72119),ee=n(89222),te=n(21737),ne=function(){var e=(0,a.$G)().t;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(o(),{children:(0,l.jsx)("title",{children:e("singleselect_page.site_title")})}),(0,l.jsxs)(r.Z,{navItems:s.t,navHeaderText:e("main_nav.components"),navIcon:"puzzle",children:[(0,l.jsx)(Q.X,{variant:"h1",children:e("singleselect_page.heading")}),(0,l.jsx)(U.g,{variant:"div",mt:"m",mb:"l",children:(0,l.jsx)(G.d,{href:"https://vrk-kpa.github.io/suomifi-ui-components/#/Components/SingleSelect",labelNewWindow:e("common.opens_in_a_new_tab"),children:e("common.see_technical_documentation_of_component")})}),(0,l.jsx)(Y.o,{children:e("singleselect_page.accessibility")}),(0,l.jsx)($.n,{className:"my-xl",children:(0,l.jsx)(ee.x,{variant:"lead",children:e("singleselect_page.ingress")})}),(0,l.jsx)(c.Z,{style:{marginBottom:te.R.spacing.s},children:(0,l.jsx)(J,{labelText:e("singleselect_page.example.label_text"),hintText:e("singleselect_page.example.hint_text"),clearButtonLabel:e("singleselect_page.example.clear_button_label"),items:[{name:"Ammattiliikenne",labelText:"Ammattiliikenne",uniqueItemId:"jh2435626"},{name:"Ansiotulot",labelText:"Ansiotulot",uniqueItemId:"h9823523"},{name:"Asiakirja-_ja_tietopyynn\xf6t",labelText:"Asiakirja- ja tietopyynn\xf6t",uniqueItemId:"sh908293482"},{name:"asiakkuuden_hallinta",labelText:"Asiakkuuden hallinta",uniqueItemId:"s82502335"},{name:"asuminen_ja_rakentaminen",labelText:"Asuminen ja rakentaminen",disabled:!0,uniqueItemId:"ps9081231"},{name:"asunto_osakkeet",labelText:"Asunto-osakkeet",uniqueItemId:"ps9081298"}],visualPlaceholder:e("singleselect_page.example.visual_placeholder"),noItemsText:e("singleselect_page.example.noItemsText"),ariaOptionsAvailableText:e("singleselect_page.example.aria_options_available_text")})}),(0,l.jsx)(U.g,{variant:"section",className:"my-xl",children:(0,l.jsxs)(u.Z,{children:[(0,l.jsx)(Q.X,{variant:"h3",as:"h2",children:e("common.accessibility_and_usability")}),(0,l.jsxs)("ul",{children:[(0,l.jsx)("li",{children:e("singleselect_page.accessibility_list.point_1")}),(0,l.jsx)("li",{children:e("singleselect_page.accessibility_list.point_2")}),(0,l.jsx)("li",{children:e("singleselect_page.accessibility_list.point_3")}),(0,l.jsx)("li",{children:e("singleselect_page.accessibility_list.point_4")})]})]})}),(0,l.jsxs)(U.g,{variant:"section",children:[(0,l.jsx)(Q.X,{variant:"h2",className:"mb-xl",children:e("singleselect_page.what_does_the_component_contain.heading")}),(0,l.jsx)($.n,{className:"my-xl",children:e("singleselect_page.what_does_the_component_contain.text_1")}),(0,l.jsx)($.n,{className:"my-xl",children:e("singleselect_page.what_does_the_component_contain.text_2")})]}),(0,l.jsxs)(U.g,{variant:"section",children:[(0,l.jsx)(Q.X,{variant:"h2",className:"mb-xl",children:e("singleselect_page.size_and_usage.heading")}),(0,l.jsx)($.n,{className:"my-xl",children:e("singleselect_page.size_and_usage.text_1")})]})]})]})}}},function(e){e.O(0,[6510,4039,5079,1793,9774,2888,179],(function(){return t=52278,e(e.s=t);var t}));var t=e.O();_N_E=t}]);